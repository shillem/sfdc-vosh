<template>
  <section aria-modal="true" aria-hidden={closed} class={sectionClass} role="dialog" tabindex="-1">
    <div lwc:if={opened} class="slds-modal__container">
      <header class={headerClass}>
        <lightning-button-icon
          alternative-text={i18n.close}
          class="slds-modal__close"
          icon-name="utility:close"
          onclick={handleClose}
          size="large"
          title={i18n.close}
          variant="bare-inverse"
        ></lightning-button-icon>

        <h2 lwc:if={title} class="slds-text-heading_medium slds-hyphenate">{title}</h2>

        <p lwc:if={tagline} class="slds-m-top_x-small">{tagline}</p>
      </header>

      <div class="slds-modal__content slds-p-around_medium">
        <div lwc:if={loading} class="slds-is-relative" style="height: 6rem">
          <lightning-spinner alternative-text="..."></lightning-spinner>
        </div>

        <template lwc:else>
          <slot></slot>
        </template>
      </div>

      <footer lwc:if={showFooter} class="slds-modal__footer">
        <slot name="footer" onslotchange={handleFooterSlotChange}></slot>

        <div lwc:if={showDefaultFooter} class="slds-grid slds-grid_vertical-align-center">
          <div class="slds-col slds-size_4-of-12 slds-text-align_left">
            <button
              lwc:if={subsequentStep}
              class="slds-button slds-button_neutral"
              title={i18n.previous}
              onclick={handleStepPrevious}
            >
              {i18n.previous}
            </button>
          </div>
          <div class="slds-col slds-text-align_center">
            <lightning-progress-indicator lwc:if={hasSteps} current-step={step}>
              <template for:each={steps} for:item="step">
                <lightning-progress-step
                  key={step.value}
                  label={step.label}
                  value={step.value}
                ></lightning-progress-step>
              </template>
            </lightning-progress-indicator>
          </div>
          <div class="slds-col slds-size_4-of-12">
            <button
              class="slds-button slds-button_neutral"
              onclick={handleClose}
              title={i18n.cancel}
            >
              {i18n.cancel}
            </button>

            <button
              lwc:if={lastStep}
              class="slds-button slds-button_brand"
              disabled={disabled}
              onclick={handleOk}
              title={i18n.ok}
            >
              {i18n.ok}
            </button>

            <button
              lwc:else
              class="slds-button slds-button_brand"
              onclick={handleStepNext}
              title={i18n.next}
            >
              {i18n.next}
            </button>
          </div>
        </div>
      </footer>
    </div>
  </section>

  <div class={backdropClass}></div>
</template>
